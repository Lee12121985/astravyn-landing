<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timesheet Test</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid;
            background: #2a2a2a;
        }
        .test-result.pass {
            border-color: #00ff00;
        }
        .test-result.fail {
            border-color: #ff0000;
            color: #ff6666;
        }
        .test-result.info {
            border-color: #00aaff;
            color: #00aaff;
        }
        h1 {
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 5px;
            font-family: inherit;
        }
        button:hover {
            background: #00cc00;
        }
        .loading {
            color: #ffff00;
        }
        pre {
            background: #000;
            padding: 10px;
            overflow-x: auto;
            border: 1px solid #00ff00;
        }
    </style>
</head>
<body>
    <h1>âš¡ TIMESHEET AUTOMATED TEST âš¡</h1>
    
    <div>
        <button onclick="runAllTests()">â–¶ Run All Tests</button>
        <button onclick="testFirebase()">ðŸ”¥ Test Firebase</button>
        <button onclick="testWelcomePage()">ðŸ“Š Test Welcome Page</button>
        <button onclick="testFullTimesheet()">ðŸ“… Test Full Timesheet</button>
    </div>
    
    <div id="testResults"></div>

    <script>
        const results = document.getElementById('testResults');
        
        function log(message, status = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${status}`;
            div.innerHTML = `<strong>[${new Date().toLocaleTimeString()}]</strong> ${message}`;
            results.appendChild(div);
            console.log(message);
        }

        async function runAllTests() {
            results.innerHTML = '';
            log('ðŸš€ Starting automated tests...', 'info');
            
            await testFirebase();
            await testWelcomePage();
            await testFullTimesheet();
            
            log('âœ… All tests completed!', 'pass');
        }

        async function testFirebase() {
            log('Testing Firebase Configuration...', 'info');
            
            try {
                // Test Firebase module loading
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js');
                log('âœ“ Firebase App module loaded', 'pass');
                
                const { getAuth } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js');
                log('âœ“ Firebase Auth module loaded', 'pass');
                
                const { getFirestore } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
                log('âœ“ Firebase Firestore module loaded', 'pass');
                
                // Test Firebase initialization
                const firebaseConfig = {
                    apiKey: "AIzaSyBAktaI0WqKxwHQALx53_Dl_bgH5i2HZa0",
                    authDomain: "vsd2-48c2d.firebaseapp.com",
                    projectId: "vsd2-48c2d",
                    storageBucket: "vsd2-48c2d.firebasestorage.app",
                    messagingSenderId: "824762774902",
                    appId: "1:824762774902:web:3d4db2d44c8cebbbb1fd42"
                };
                
                const app = initializeApp(firebaseConfig, 'test-app');
                log('âœ“ Firebase initialized successfully', 'pass');
                
                const auth = getAuth(app);
                log('âœ“ Firebase Auth initialized', 'pass');
                
                const db = getFirestore(app);
                log('âœ“ Firestore initialized', 'pass');
                
            } catch (error) {
                log(`âœ— Firebase test failed: ${error.message}`, 'fail');
                log(`<pre>${error.stack}</pre>`, 'fail');
            }
        }

        async function testWelcomePage() {
            log('Testing Welcome Page...', 'info');
            
            try {
                const response = await fetch('./welcome.html');
                if (response.ok) {
                    log('âœ“ welcome.html is accessible', 'pass');
                    
                    const html = await response.text();
                    
                    // Check for required elements
                    if (html.includes('welcome-app.js')) {
                        log('âœ“ welcome-app.js script included', 'pass');
                    } else {
                        log('âœ— welcome-app.js script not found', 'fail');
                    }
                    
                    if (html.includes('welcome-style.css')) {
                        log('âœ“ welcome-style.css stylesheet included', 'pass');
                    } else {
                        log('âœ— welcome-style.css stylesheet not found', 'fail');
                    }
                    
                    if (html.includes('firebaseAuth')) {
                        log('âœ“ Firebase Auth integration found', 'pass');
                    } else {
                        log('âœ— Firebase Auth integration missing', 'fail');
                    }
                    
                } else {
                    log(`âœ— welcome.html not accessible (${response.status})`, 'fail');
                }
                
                // Test JavaScript file
                const jsResponse = await fetch('./welcome-app.js');
                if (jsResponse.ok) {
                    log('âœ“ welcome-app.js is accessible', 'pass');
                    const js = await jsResponse.text();
                    
                    if (js.includes('loadLastTimesheetData')) {
                        log('âœ“ Data loading function exists', 'pass');
                    } else {
                        log('âœ— Data loading function missing', 'fail');
                    }
                    
                    if (js.includes('showDemoPreview')) {
                        log('âœ“ Demo preview function exists', 'pass');
                    } else {
                        log('âœ— Demo preview function missing', 'fail');
                    }
                } else {
                    log('âœ— welcome-app.js not accessible', 'fail');
                }
                
                // Test CSS file
                const cssResponse = await fetch('./welcome-style.css');
                if (cssResponse.ok) {
                    log('âœ“ welcome-style.css is accessible', 'pass');
                } else {
                    log('âœ— welcome-style.css not accessible', 'fail');
                }
                
            } catch (error) {
                log(`âœ— Welcome page test failed: ${error.message}`, 'fail');
            }
        }

        async function testFullTimesheet() {
            log('Testing Full Timesheet Page...', 'info');
            
            try {
                const response = await fetch('./index.html');
                if (response.ok) {
                    log('âœ“ index.html is accessible', 'pass');
                    
                    const html = await response.text();
                    
                    if (html.includes('Dashboard')) {
                        log('âœ“ Dashboard navigation button found', 'pass');
                    } else {
                        log('âœ— Dashboard navigation button missing', 'fail');
                    }
                    
                    if (html.includes('calendar')) {
                        log('âœ“ Calendar elements found', 'pass');
                    } else {
                        log('âš  Calendar elements might be missing', 'fail');
                    }
                    
                } else {
                    log(`âœ— index.html not accessible (${response.status})`, 'fail');
                }
            } catch (error) {
                log(`âœ— Full timesheet test failed: ${error.message}`, 'fail');
            }
        }

        // Auto-run on load
        log('Test page loaded. Click "Run All Tests" to begin.', 'info');
    </script>
</body>
</html>
